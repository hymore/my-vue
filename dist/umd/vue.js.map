{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observe/array.js","../../src/observe/dep.js","../../src/observe/index.js","../../src/state.js","../../src/complier/parse-html.js","../../src/complier/index.js","../../src/util/next-tick.js","../../src/observe/schedular.js","../../src/observe/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/createElement.js","../../src/render.js","../../src/initGlobalAPI.js","../../src/index.js"],"sourcesContent":["/**\n * 判断是否是对象\n * @param {*} data\n */\nexport function isObject(data) {\n  return typeof data === \"object\" && data !== null;\n}\n\nexport function def(data, key, value) {\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value,\n  });\n}\n\nexport function proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key];\n    },\n    set(newVal) {\n      vm[source][key] = newVal;\n    },\n  });\n}\n\nconst LIFECYCLE_HOOKS = [\n  \"beforeCreate\",\n  \"created\",\n  \"beforeMount\",\n  \"mounted\",\n  \"beforeUpdate\",\n  \"updated\",\n  \"beforeDestory\",\n  \"destoryed\",\n];\nlet strats = {};\nfunction mergeHook(parentVal, childVal) {\n  if (childVal) {\n    if (parentVal) {\n      return parentVal.concat(childVal);\n    } else {\n      return [childVal];\n    }\n  } else {\n    return parentVal;\n  }\n}\nLIFECYCLE_HOOKS.forEach((hook) => {\n  strats[hook] = mergeHook;\n});\nexport function mergeOptions(parent, child) {\n  const options = {};\n  for (let key in parent) {\n    mergeField(key);\n  }\n  for (let key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField(key) {\n    if (strats[key])\n      return (options[key] = strats[key](parent[key], child[key]));\n    if (typeof parent[key] === \"object\" && typeof child[key] === \"object\") {\n      options[key] = {\n        ...parent[key],\n        ...child[key],\n      };\n    } else if (child[key] == null) {\n      options[key] = parent[key];\n    } else {\n      options[key] = child[key];\n    }\n  }\n  return options;\n}\n","let oldArrayMethods = Array.prototype;\n\nconst methods = [\n  \"push\",\n  \"pop\",\n  \"shift\",\n  \"unshift\",\n  \"reverse\",\n  \"splice\",\n  \"sort\",\n];\nexport let arrayMethods = Object.create(oldArrayMethods);\n\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    const result = oldArrayMethods[method].apply(this, args); //调用原生的方法\n    let inserted; //当前插入的元素；\n    let ob = this.__ob__;\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n      default:\n        break;\n    }\n    if (inserted) {\n      ob.observerArray(inserted);\n      this.dep.notify();\n    }\n    return result;\n  };\n});\n","let id = 0;\n\nexport class Dep {\n  constructor() {\n    this.id = id++;\n    this.subs = [];\n  }\n  depend() {\n    // this.subs.push(Dep.target);\n    Dep.target.addDep(this);\n  }\n  notify() {\n    this.subs.forEach((watcher) => {\n      watcher.update();\n    });\n  }\n  addSub(watcher) {\n    this.subs.push(watcher);\n  }\n}\n\nlet stack = [];\nexport function pushTarget(watcher) {\n  Dep.target = watcher;\n  stack.push(watcher);\n}\n\nexport function popTarget() {\n  stack.pop();\n  Dep.target = stack[stack.length - 1];\n}\n","import { isObject, def } from \"../util/index\";\nimport { arrayMethods } from \"./array.js\";\nimport { Dep } from \"./dep\";\nclass Observer {\n  constructor(value) {\n    // value.__ob__ = this;\n    this.dep = new Dep();//dep用于数组依赖收集\n    def(value, \"__ob__\", this);\n    if (Array.isArray(value)) {\n      // 不要对数字的索引进行观测\n      value.__proto__ = arrayMethods;\n      this.observerArray(value);\n    } else this.walk(value);\n  }\n  walk(data) {\n    let keys = Object.keys(data);\n    keys.forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n  observerArray(value) {\n    for (let i = 0; i < value.length; i++) {\n      observe(value[i]);\n    }\n  }\n}\nfunction defineReactive(data, key, value) {\n  let dep = new Dep();// dep 用于对象收集依赖\n  let childOb =  observe(value);\n  Object.defineProperty(data, key, {\n    get() {\n      // 依赖收集\n      if (Dep.target) {\n        dep.depend();\n        // 数组的依赖收集\n        if(childOb){\n          childOb.dep.depend();\n          // 数组里还有数组\n          if(Array.isArray(value)){\n            dependArray(value);\n          }\n        }\n      }\n      return value;\n    },\n    set(newVal) {\n      if (newVal == value) return;\n      observe(newVal);\n      value = newVal;\n      // 通知watcher更新\n      dep.notify();\n    },\n  });\n}\nexport function observe(data) {\n  if (!isObject(data)) {\n    return;\n  }\n  return new Observer(data); //用来观测数据\n}\nfunction dependArray(value){\n  for(let i = 0 ;i<value.length;i++){\n    let current = value[i];\n    current.__ob__ && current.__ob__.dep.depend();\n    if(Array.isArray(current)){\n      dependArray(current);\n    }\n  }\n}","import { observe } from \"./observe/index\";\nimport { proxy } from \"./util/index\";\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.props) {\n    initProps(vm);\n  }\n  if (opts.methods) {\n    initMethods(vm);\n  }\n  if (opts.computed) {\n    initComputed(vm);\n  }\n  if (opts.watch) {\n    initWatch(vm);\n  }\n  if (opts.data) {\n    initData(vm);\n  }\n}\n\nfunction initData(vm) {\n  //   数据初始化\n  let data = vm.$options.data;\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\n\n  for (let key in data) {\n    proxy(vm, \"_data\", key);\n  }\n  observe(data);\n}\nfunction initComputed(vm) {}\nfunction initMethods(vm) {}\nfunction initProps(vm) {}\nfunction initWatch(vm) {}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\nexport function parseHTML(html) {\n  function createASTElement(tagName, attrs) {\n    return {\n      tag: tagName,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null,\n    };\n  }\n  function start(tagName, attrs) {\n    //   console.log((\"开始标签\", tagName), (\"属性是\", attrs));\n    let element = createASTElement(tagName, attrs);\n    if (!root) {\n      root = element;\n    }\n    currentParent = element;\n    stack.push(element);\n  }\n  function end(tagName) {\n    //   console.log(\"结束标签：\", tagName);\n    let element = stack.pop();\n    currentParent = stack[stack.length - 1];\n    if (currentParent) {\n      element.parent = currentParent;\n      currentParent.children.push(element);\n    }\n  }\n  function chars(text) {\n    //   console.log(\"文本是：\", text);\n    text = text.replace(/\\s/g, \"\");\n    if (text) {\n      currentParent.children.push({\n        type: TEXT_TYPE,\n        text,\n      });\n    }\n  }\n  let root = null,\n    currentParent;\n  let stack = [];\n\n  while (html) {\n    let textEnd = html.indexOf(\"<\");\n    if (textEnd == 0) {\n      // 开始或借宿标签\n      let startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    let text;\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd);\n    }\n    if (text) {\n      advance(text.length);\n      chars(text);\n    }\n  }\n\n  function parseStartTag() {\n    let start = html.match(startTagOpen);\n    let match;\n    if (start) {\n      match = { tagName: start[1], attrs: [] };\n      advance(start[0].length);\n    }\n    // 属性解析\n    let end, attr;\n    while (\n      !(end = html.match(startTagClose)) &&\n      (attr = html.match(attribute))\n    ) {\n      advance(attr[0].length);\n      match.attrs.push({\n        name: attr[1],\n        value: attr[3] || attr[4] || attr[5],\n      });\n    }\n    if (end) {\n      advance(end[0].length);\n      return match;\n    }\n  }\n\n  function advance(n) {\n    html = html.substring(n);\n  }\n\n  return root;\n}\n","\nimport { parseHTML } from \"./parse-html\";\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nfunction genProps(attrs) {\n  let str = \"\";\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === \"style\") {\n      let obj = {};\n      attr.value.split(\";\").forEach((item) => {\n        let [key, value] = item.split(\":\");\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\nfunction genChildren(el) {\n  let children = el.children;\n  if (children.length > 0) {\n    return `${children.map((c) => gen(c)).join(\",\")}`;\n  } else {\n    return false;\n  }\n}\nfunction gen(node) {\n  if (node.type === 1) {\n    return generate(node);\n  } else {\n    let text = node.text;\n    let tokens = [];\n    let match, index;\n    let lastIndex = (defaultTagRE.lastIndex = 0);\n    while ((match = defaultTagRE.exec(text))) {\n      index = match.index;\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n      }\n      tokens.push(`_s(${match[1].trim()})`);\n      lastIndex = index + match[0].length;\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\n    }\n    return `_v(${tokens.join(\"+\")})`;\n  }\n}\nfunction generate(el) {\n  let code = `_c(\"${el.tag}\",${\n    el.attrs.length > 0 ? genProps(el.attrs) : \"undefined\"\n  },${el.children ? genChildren(el) : \"\"})`;\n\n  return code;\n}\nexport function compileToFunction(template) {\n  let root = parseHTML(template);\n  //   ast语法书生成render函数\n  let code = generate(root);\n  let renderFn = new Function(`with(this) {return ${code}}`);\n  return renderFn;\n}\n","let callbacks= [];\nlet waiting =false;\nfunction flushCallback(){\n    callbacks.forEach(cb=>cb())\n    waiting = false;\n    callbacks = [];\n}\nexport function nextTick(cb){\n    callbacks.push(cb);\n    // promise --> mutationObserver --> setImmediate --> setTimeout\n    if(waiting === false){\n\n        setTimeout(flushCallback, 0);\n        waiting = true;\n    }\n}","import {nextTick} from '../util/next-tick';\nfunction slushSchedularQueue(){\n    queue.forEach(watcher=>{\n        watcher.run();\n        queue = [];\n        has = {};\n      })\n}\nlet queue =[];\nlet has= {};\nexport function queueWatcher(watcher){\n  let id = watcher.id;\n  if(has[id] == null){\n    has[id] = true;\n    queue.push(watcher);\n   nextTick(slushSchedularQueue)\n  }\n}","import { pushTarget, popTarget } from \"./dep\";\nimport {queueWatcher} from './schedular';\nlet id = 0;\nexport class Watcher {\n  constructor(vm, expOrFn, callback, options) {\n    this.id = id++;\n    this.vm = vm;\n    this.callback = callback;\n    this.options = options;\n    this.depId = new Set();\n    this.getter = expOrFn;\n    this.deps = [];\n    this.get();\n  }\n  get() {\n    pushTarget(this); // watcher保存在Dep.target\n\n    this.getter(); //渲染watcher执行\n\n    popTarget();\n  }\n  update() {\n    // this.get();\n    queueWatcher(this);\n  }\n  addDep(dep) {\n    let id = dep.id;\n    if (!this.depId.has(id)) {\n      this.depId.add(id);\n      this.deps.push(dep);\n      dep.addSub(this);\n    }\n  }\n  run(){\n    this.get();\n  }\n}\n\n","export function patch(oldVnode, vnode) {\n  //   判断是更新还是渲染\n  const isRealElement = oldVnode.nodeType;\n  if (isRealElement) {\n    const oldElm = oldVnode;\n    const parentElm = oldElm.parentNode;\n    let el = createElm(vnode);\n    parentElm.insertBefore(el, oldElm.nextSibling);\n    parentElm.removeChild(oldElm);\n    return el;\n  }\n}\nfunction createElm(vnode) {\n  let { tag, children, key, data, text } = vnode;\n  if (typeof tag === \"string\") {\n    vnode.el = document.createElement(tag);\n    updateProperties(vnode);\n    children.forEach((child) => {\n      return vnode.el.appendChild(createElm(child));\n    });\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\nfunction updateProperties(vnode) {\n  let newProps = vnode.data || {};\n  let el = vnode.el;\n  for (let key in newProps) {\n    if (key === \"style\") {\n      for (let styleName in newProps.style) {\n        el.style[styleName.trim()] = newProps.style[styleName];\n      }\n    } else if (key === \"class\") {\n      el.className = newProps.class;\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}\n","import { Watcher } from \"./observe/watcher\";\nimport { patch } from \"./vdom/patch\";\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode);\n  };\n}\n\nexport function mountComponent(vm, el) {\n  callHook(vm, \"beforeMount\");\n\n  vm.$el = el;\n  // 渲染页面\n  let updateComponent = () => {\n    vm._update(vm._render());\n  };\n  new Watcher(vm, updateComponent, () => {}, true); // 渲染watcher\n\n  callHook(vm, \"mounted\");\n}\n\nexport function callHook(vm, hook) {\n  const handers = vm.$options[hook];\n  if (handers) {\n    for (let i = 0; i < handers.length; i++) {\n      handers[i].call(vm);\n    }\n  }\n}\n","import { initState } from \"./state\";\nimport { compileToFunction } from \"./complier/index\";\nimport { mountComponent, callHook } from \"./lifecycle\";\nimport { mergeOptions } from \"./util/index\";\nimport { nextTick } from \"./util/next-tick\";\nexport function initMixin(Vue) {\n  // 初始化流程\n  Vue.prototype._init = function (options) {\n    // 数据劫持\n    const vm = this;\n\n    // 将用户传入的配置和全局的合并\n    vm.$options = mergeOptions(vm.constructor.options, options);\n\n    callHook(vm, \"beforeCreate\");\n    // 初始化状态\n    initState(vm);\n\n    callHook(vm, \"created\");\n    // 初始化渲染\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    el = document.querySelector(el);\n    const options = vm.$options;\n    // 优先级render -- template -- el;\n    if (!options.render) {\n      if (!options.template && el) {\n        let template = el.outerHTML;\n        let render = compileToFunction(template);\n        options.render = render;\n      }\n    }\n    mountComponent(vm, el);\n  };\n  Vue.prototype.$nextTick = nextTick;\n}\n","export function createElement(tag, data = {}, ...children) {\n  //   console.log(tag, data, children);\n  let key = data.key;\n  if (key) delete data.key;\n  return vnode(tag, data, key, children, undefined);\n}\nexport function createTextNode(text) {\n  //   console.log(text);\n  return vnode(undefined, undefined, undefined, undefined, text);\n}\nfunction vnode(tag, data, key, children, text) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n  };\n}\n","import { createElement, createTextNode } from \"./vdom/createElement\";\n\nexport function renderMixin(Vue) {\n  Vue.prototype._c = function () {\n    return createElement(...arguments);\n  };\n  Vue.prototype._v = function (text) {\n    return createTextNode(text);\n  };\n  Vue.prototype._s = function (val) {\n    return val == null\n      ? \"\"\n      : typeof val === \"object\"\n      ? JSON.stringify(val)\n      : val;\n  };\n  Vue.prototype._render = function () {\n    const vm = this;\n    const { render } = vm.$options;\n    return render.call(this);\n  };\n}\n","import { mergeOptions } from \"./util/index\";\n\nexport function initGlobalAPI(Vue) {\n  Vue.options = {};\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n  };\n}\n","import { initMixin } from \"./init\";\nimport { renderMixin } from \"./render\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { initGlobalAPI } from \"./initGlobalAPI\";\nfunction Vue(options) {\n  this._init(options);\n}\ninitMixin(Vue);\nrenderMixin(Vue);\nlifecycleMixin(Vue);\n\n// 初始化全局api\ninitGlobalAPI(Vue);\nexport default Vue;\n"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newVal","LIFECYCLE_HOOKS","strats","mergeHook","parentVal","childVal","concat","forEach","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","oldArrayMethods","Array","prototype","methods","arrayMethods","create","method","args","result","apply","inserted","ob","__ob__","slice","observerArray","dep","notify","id","Dep","subs","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","Observer","isArray","__proto__","walk","keys","defineReactive","i","observe","childOb","depend","dependArray","current","initState","opts","$options","props","computed","watch","initData","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","ELEMENT_TYPE","TEXT_TYPE","parseHTML","html","createASTElement","tagName","attrs","tag","type","children","start","element","root","currentParent","end","chars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","attr","name","n","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","genChildren","el","map","c","gen","join","node","generate","tokens","index","lastIndex","exec","trim","code","compileToFunction","template","renderFn","Function","callbacks","waiting","flushCallback","cb","nextTick","setTimeout","slushSchedularQueue","queue","run","has","queueWatcher","Watcher","expOrFn","callback","depId","Set","getter","deps","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","updateComponent","_render","handers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","$nextTick","undefined","renderMixin","_c","arguments","_v","_s","val","initGlobalAPI","mixin"],"mappings":"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"}